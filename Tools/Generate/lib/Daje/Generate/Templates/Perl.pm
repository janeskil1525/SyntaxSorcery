package Daje::Generate::Templates::Perl;
use v5.40;

1;

__DATA__

@@ class
use v5.40;
use feature 'class';
no warnings 'experimental::class';

# Autogenerated class <<date>>
# Any manual changes to this class will be overwritten next time its generated

class <<name_space>><<classname>> :isa(<<base_name_space>><<base_class_name>>) {

    <<fields>>

    <<pkey>>
    <<fkey>>
    <<insert>>
    <<update>>
    <<methods>>


};

@@ fields

    my $fields :reader = <<select_fields>>;

@@ method

    method <<method_name>> ($self, <<parameters>>) {
        <<method_content>>
    };


@@ baseclass
use v5.40;
use feature 'class';
no warnings 'experimental::class';

# Autogenerated class <<date>>
# Any manual changes to this class will be overwritten next time its generated

class <<base_name_space>> {
    field $db :param :reader;


};

@@ interface
use v5.40;
use feature 'class';
no warnings 'experimental::class';

# Autogenerated class <<date>>
# This class is generated once. Any over rides or special methods should be put here

class <<interface>><<classname>> :isa(<<name_space>><<classname>>) {


};

@@ load_from_pkey

method load_pkey($self, $<<primary_key>>) {
    my $result->{result} = 1;
    try{
        my $load = $self->db->select(
            '<<table_name>>',
                [<<select_fields>>],
                {<<primary_key>> => $<<primary_key>>}
        );
        $result->{data};
        $result->{data} = $load->hash if $load and $load->rows > 0;
    } catch ($e) {
        $result->{result} = 0;
        $result->{data} = "";
        $result->{error} = $e;
    }
    return $hash;
}

@@ load_from_fkey

method load_<<foreign_key>>($self, $<<foreign_key>> ) {
    my $result->{result} = 1;
    try {
        my $load = $db->select(
            '<<table_name>>',
                [<<select_fields>>],
            {<<foreign_key>> => $<<foreign_key>>}
        );
        $result->{data};
        $result->{data} = $load->hashes if $load and $load->rows > 0;
    } catch ($e) {
        $result->{result} = 0;
        $result->{data} = "";
        $result->{error} = $e;
    }
    return $hashes;
}

@@ load_list

method load_list($self, $key_value) {
    my $result->{result} = 1;
    try {
        my $load = $db->select(
            '<<table_name>>',
                [<<select_fields>>],
            {$key_value}
        );
        $result->{data};
        $result->{data} = $load->hashes if $load and $load->rows > 0;
    } catch ($e) {
        $result->{result} = 0;
        $result->{data} = "";
        $result->{error} = $e;
    }

    return $result;
}

@@ insert_data

method insert_<<table_name>>($self, $data) {
    my $result->{result} = 1;
    try {
        $db->insert(<<table_name>>, $data);
    } catch ($e) {
        $result->{error} = $e;
        $result->{result} = 0;
    }

    return $result;
}

@@ update_data

method update_<<table_name>>($self, $data, $keys) {
    my $result->{result} = 1;
    try {
        $db->update(<<table_name>>, $data, $keys);
    } catch ($e) {
        $result->{error} = $e;
        $result->{result} = 0;
    }

    return $result;
}

#################### pod generated by Pod::Autopod - keep this line to make pod updates possible ####################

=head1 NAME

Daje::Generate::Templates::Perl


=head1 DESCRIPTION

Autogenerated class <<date>>
Any manual changes to this class will be overwritten next time its generated


=head1 REQUIRES

L<feature> 

L<v5.40> 

L<feature> 

L<v5.40> 

L<v5.40> 


=head1 METHODS


=cut

